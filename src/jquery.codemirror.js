// Generated by CoffeeScript 1.6.3
(function($jQ) {
  var PLUGIN_NAME, _ATTR_JOIN_CHARACTER, _ATTR_OPTIONS, _ATTR_PREFIX, _DEFAULT_SETTINGS, _buildHTMLOptions, _buildSettings;
  PLUGIN_NAME = "codemirror";
  _ATTR_PREFIX = "code-mirror";
  _ATTR_JOIN_CHARACTER = "-";
  _DEFAULT_SETTINGS = {
    'mode': 'javascript',
    'lineNumbers': true,
    'runmode': false
  };
  _ATTR_OPTIONS = ['mode', 'runmode'];
  /*
  build the settings here
  */

  _buildSettings = function(oOptions) {
    if (oOptions == null) {
      oOptions = {};
    }
    return $jQ.extend(_DEFAULT_SETTINGS, oOptions);
  };
  /*
  build the unique objects set from html data attributes
  */

  _buildHTMLOptions = function(oObject) {
    var aOptions, i, item, sAttrName, sAttrVal, _i, _len;
    aOptions = {};
    for (i = _i = 0, _len = _ATTR_OPTIONS.length; _i < _len; i = ++_i) {
      item = _ATTR_OPTIONS[i];
      sAttrName = [_ATTR_PREFIX, item].join(_ATTR_JOIN_CHARACTER);
      sAttrVal = $(oObject).data(sAttrName);
      if (typeof sAttrName !== "undefined" && typeof sAttrVal !== "undefined") {
        aOptions[item] = sAttrVal;
      }
    }
    return aOptions;
  };
  /*
  create the plugin
  */

  return $jQ.fn[PLUGIN_NAME] = function(oOptions) {
    var oCodeMirrorObject, oSettings;
    if (oOptions == null) {
      oOptions = {};
    }
    oCodeMirrorObject = this;
    oSettings = _buildSettings(oOptions);
    this.each(function() {
      var oHTMLAttrSettings, oUniqueSetting;
      oHTMLAttrSettings = _buildHTMLOptions(this);
      oUniqueSetting = $jQ.extend(oSettings, oHTMLAttrSettings);
      oCodeMirrorObject = CodeMirror.fromTextArea(this, oUniqueSetting);
    });
    return oCodeMirrorObject;
  };
})(jQuery);
