// Generated by CoffeeScript 1.6.3
(function($jQ) {
  var PLUGIN_NAME, _ATTR_JOIN_CHARACTER, _ATTR_OPTIONS, _ATTR_PREFIX, _DEFAULT_SETTINGS, _buildHTMLOptions, _buildSettings;
  PLUGIN_NAME = "codemirror";
  _ATTR_PREFIX = "code-mirror";
  _ATTR_JOIN_CHARACTER = "-";
  _DEFAULT_SETTINGS = {
    'mode': 'javascript',
    'lineNumbers': true,
    'runmode': false
  };
  _ATTR_OPTIONS = {
    'mode': "mode",
    'runmode': "runmode",
    'linenumbers': "lineNumbers"
  };
  /*
  build the settings here
  */

  _buildSettings = function(oOptions) {
    if (oOptions == null) {
      oOptions = {};
    }
    return $jQ.extend(_DEFAULT_SETTINGS, oOptions);
  };
  /*
  build the unique objects set from html data attributes
  */

  _buildHTMLOptions = function(oObject) {
    var aOptions, sAttrName, sAttrVal, sItemKey, sItemVal;
    aOptions = {};
    for (sItemKey in _ATTR_OPTIONS) {
      sItemVal = _ATTR_OPTIONS[sItemKey];
      sAttrName = [_ATTR_PREFIX, sItemKey].join(_ATTR_JOIN_CHARACTER);
      sAttrVal = $(oObject).data(sAttrName);
      if (typeof sAttrName !== "undefined" && typeof sAttrVal !== "undefined") {
        aOptions[sItemVal] = sAttrVal;
      }
    }
    return aOptions;
  };
  /*
  create the plugin
  */

  return $jQ.fn[PLUGIN_NAME] = function(oOptions) {
    var oCodeMirrorObject, oSettings;
    if (oOptions == null) {
      oOptions = {};
    }
    oCodeMirrorObject = this;
    oSettings = _buildSettings(oOptions);
    this.each(function() {
      var oHTMLAttrSettings, oOptionSettings, oUniqueSetting;
      oOptionSettings = {};
      $.extend(oOptionSettings, oSettings);
      oHTMLAttrSettings = _buildHTMLOptions(this);
      oUniqueSetting = $jQ.extend(oOptionSettings, oHTMLAttrSettings);
      oCodeMirrorObject = CodeMirror.fromTextArea(this, oUniqueSetting);
    });
    return oCodeMirrorObject;
  };
})(jQuery);
